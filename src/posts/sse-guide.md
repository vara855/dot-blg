---
title: Server Sent Events –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
description: –ß—Ç–æ —Ç–∞–∫–æ–µ EventSource –∏ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSE –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ö–∞–∫ –ø—Ä–æ—Å—Ç–∞–≤–∏—Ç—å —Ö—ç–¥–µ—Ä—ã –≤ EventSource. Authorization in EventSource. Best practice for SSE. Server-sent events guide.
date: 2023-02-12
tags:
  - network
  - frontend
  - js
  - http
  - üá∑üá∫ RU
layout: layouts/post.njk
---

> –í –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ —è –Ω–µ –±—É–¥—É —É–≥–ª—É–±–ª—è—Ç—å—Å—è –≤ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—é –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É. –≠—Ç–∞ —Å—Ç–∞—Ç—å—è –ø—Ä–æ—Å—Ç–æ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ—Ü–µ–ø—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SSE –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.

## TLDR

* –ù–µ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∏–∫–∞–∫–∏–µ –ø–æ–ª–∏—Ñ–∏–ª—ã `EventSource` –∏–∑ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏ –∏ –≤ —Ü–µ–ª–æ–º –¥–ª—è `SSE`. –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å [IE](https://www.youtube.com/watch?v=9Deg7VrpHbM).
* –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ –∫—É–∫–∞—Ö —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `withCredentials` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
* –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ –±—Ä–∞—É–∑–µ—Ä `EventSource`. –ï—Å–ª–∏ –∂–µ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π, –ø–∞—Ä—Å–∏–Ω–≥, —Ö–µ–¥–µ—Ä—ã) - –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ–≤–µ—Ä—Ö `fetch` streaming, –∏–ª–∏ –∂–µ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [@microsoft/fetch-event-source](https://www.npmjs.com/package/@microsoft/fetch-event-source) —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.

## –ß—Ç–æ —Ç–∞–∫–æ–µ SSE?

[Server-sent events (SSE)](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events) - —ç—Ç–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–µ–∫–µ–Ω–¥–∞ –ø–æ-–∏–≤–µ–Ω—Ç–Ω–æ (by-event). –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è HTTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –º—ã –º–æ–∂–µ–º –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –±–µ–∫–µ–Ω–¥–∞, –∞ —Ç–∞–∫–∂–µ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ `error`. –ü–æ —Å—É—Ç–∏, –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —ç—Ç–æ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ - —ç—Ç–æ `WebSocket`, –≤ –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–ª—å–∑—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä—É.

[EventSource](https://developer.mozilla.org/en-US/docs/Web/API/EventSource) - Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è server-sent events.

### –ì–¥–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

–î–ª—è —Å–µ–±—è —è —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–ª —Ç–∞–∫:

> –ï—Å–ª–∏ –º–Ω–µ –Ω—É–∂–Ω–∞ –æ–¥–Ω–æ-–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–≤—è–∑—å —Å –±—ç–∫–µ–Ω–¥–æ–º - `EventSource` –º–æ–π –≤—ã–±–æ—Ä. –í–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö - `WebSocket` –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ `HTTP`. (–ù—É –µ—Å–ª–∏ –ø—Ä—è–º –æ—á–µ–Ω—å –Ω—É–∂–Ω–æ - –º–æ–∂–Ω–æ –∏ `grpc`...);

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å—Ç—Ä–∞–Ω–Ω–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

* –ï—Å–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ - —Ç–æ –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏—Ç —Å–æ–±—ã—Ç–∏–µ `error`, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∏–∫–∞–∫ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –ø–æ–Ω—è—Ç—å, —á—Ç–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
* –ù–µ–ª—å–∑—è –Ω–∏—á–µ–≥–æ –ø–µ—Ä–µ–¥–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ `URL`, –∫—Ä–æ–º–µ –∫–∞–∫ —Ñ–ª–∞–≥–∞ `withCredentials`.

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏

[–í–µ–∑–¥–µ, –∫—Ä–æ–º–µ IE](https://caniuse.com/?search=server-sent%20events).

{% image "sse-guide/caniuse.png", "caniuse screenshot" %}

## –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è?

–Ø —Å–æ–∑–¥–∞–ª –Ω–µ–±–æ–ª—å—à–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SSE –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.

{% unfurl "https://github.com/vara855/guide-sse-blg" %}

```shell
git clone git@github.com:vara855/guide-sse-blg.git
```

### –ü—Ä–∏–º–µ—Ä [—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](https://github.com/vara855/guide-sse-blg/blob/master/nodejs-sse-example/index.js) SSE route

```js
function createSseEvent(data) {
  return `data: ${data}\n\n`;
}
async function onDigits(req, res) {
  console.log(`open -> ${req.url}`);
  res.writeHead(200, {
    "Content-Type": "text/event-stream; charset=utf-8",
    "Cache-Control": "no-cache",
  });

  let i = 0;

  for await (const startTime of setInterval(1000, Date.now())) {
    const now = Date.now();
    i++;
    const message = `Event #${i} time: ${new Date().toLocaleTimeString()}`;
    res.write(createSseEvent(message));
    console.log(`Produced message: "${message}"`);
    if (now - startTime > 10000) {
      res.write(
        "event: finish\ndata: All of the events were sent. Closing connection.\n\n"
      );
      console.log(`close response ${req.url}`);
      res.end();
      break;
    }
  }
}
```

–ö–∞–∫ –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å, –ø—Ä–æ—Ç–æ–∫–æ–ª SSE - —Ç–µ–∫—Å—Ç–æ–≤—ã–π. –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (`data`) –∏ –¥–æ–ª–∂–Ω–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `\n\n`. –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å [–∑–¥–µ—Å—å](https://html.spec.whatwg.org/multipage/server-sent-events.html#server-sent-events).

–¢–∞–∫–∂–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –º–æ–∂–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä `id` –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è `event`.

–¢–æ –µ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫:

```shell
# one event
event: name-of-event
data: event-data

# another one
data: event-data-2
id: event-id
```

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º —Ç–∞–∫–∂–µ —è–≤–ª—è–µ—Ç—Å—è —Ö–µ–¥–µ—Ä —Å —Ç–∏–ø–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞ `text/event-stream`.

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

–í–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —ç—Ç–∏–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ, –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ª–∏—à—å —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä `EventSource` –∏ –Ω–∞–≤–µ—Å–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π.

```js
const client = new EventSource("/be/digits", { withCredentials: true });

client.on('message', (event) => {
  console.log('Data received', event.data);
})
client.on('close', () => { /* ... */ });
client.on('open', () => { /* ... */});

client.addEventListener('eventType', evt => { /* ... */ });
```

–ë–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π `EventSource` –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å.

–ù–µ–±–æ–ª—å—à–∞—è –¥–µ–º–∫–∞ –±–µ–∫–µ–Ω–¥–∞ –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –≤ —ç—Ç–æ–º [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏](/posts/sse-guide/#Kak-polzovatsya). –î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–ª–µ–¥—É—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:

```shell
npm run vanilla-demo
```

## –ü—Ä–æ–±–ª–µ–º–∞ EventSource –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–û–Ω –Ω–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞–±–µ–ª—å–Ω—ã–π –æ—Ç —Å–ª–æ–≤–∞ —Å–æ–≤—Å–µ–º. –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –º–Ω–æ–≥–∏–µ –ª—é–¥–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–≥–æ, –∏ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –º–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ StackOverFlow –æ–± —ç—Ç–æ–º –ø—Ä–æ—Å—Ç–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ ([#1](https://stackoverflow.com/questions/28176933/http-authorization-header-in-eventsource-server-sent-events), [#2](https://stackoverflow.com/questions/6623232/eventsource-and-basic-http-authentication), ...).

–í–º–µ—Å—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –≤ –±—Ä–∞—É–∑–µ—Ä—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –º–Ω–æ–≥–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ–ª–∏—Ñ–∏–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ö–µ–¥–µ—Ä—ã, –∏–ª–∏ –∂–µ –º–µ–Ω—è—Ç—å –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

–°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–æ–ª–∏—Ñ–∏–ª—ã:

* [npm:eventsource](https://www.npmjs.com/package/eventsource)
* [npm:event-source-polyfill](https://www.npmjs.com/package/event-source-polyfill)

**–ù–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –æ–±—Ö–æ–¥–∏—Ç—å –≤—Å–µ —ç—Ç–∏ –ø–æ–ª–∏—Ñ–∏–ª—ã —Å—Ç–æ—Ä–æ–Ω–æ–π.**
–£ –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–æ–∂–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å *"–∏–Ω—Ç–µ—Ä–µ—Å–Ω—É—é"* –Ω–∞–¥–ø–∏—Å—å –≤ —Ä–∏–¥–º–∏.

–û–Ω–∏ –¥–æ–≤–æ–ª—å–Ω–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã, –∏ —ç—Ç–æ –≥—Ä—É—Å—Ç–Ω–æ üòü. –ü–æ—Ç–æ–º—É —á—Ç–æ, –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –≤ –Ω–∏—Ö –∫—Ä–∞–π–Ω–µ –Ω–∏–∑–∫–æ–µ, –∞ —Ç–∞–∫–∂–µ –µ—Å–ª–∏ –≤—ã –ø–æ–ø—Ä–æ–±—É–µ—Ç–µ –∏–º–∏ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, –≤—ã –Ω–∞—Ç–∫–Ω—ë—Ç–µ—Å—å –Ω–∞ —Ä–∞–∑–ª–∏—á–∏—è –≤ —Ä–∞–±–æ—Ç–µ —Å *"–Ω–∞—Ç–∏–≤–Ω—ã–º"* `EventSource`.

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —Ä–∞–∑–ª–∏—á–∏–π –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –∑–∞–ø—É—Å—Ç–∏–≤ —Å–∫—Ä–∏–ø—Ç

```shell
npm run vanilla-polyfill-demo
```

## `Fetch` —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `SSE`

{% unfurl "https://www.npmjs.com/package/@microsoft/fetch-event-source" %}

## –†–µ—à–∞–µ–º –ø—Ä–æ–±–ª–µ–º—É Auth —Ö–µ–¥–µ—Ä–æ–≤

### –ü–µ—Ä–≤—ã–π –°–ø–æ—Å–æ–±

–ò—Å–ø–æ–ª—å–∑—É–µ–º [–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ –∫—É–∫–∞–º](https://swagger.io/docs/specification/authentication/cookie-authentication/), –ø–æ –∫–æ—Ç–æ—Ä–æ–π –±—ç–∫–µ–Ω–¥ —Å–º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –º—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

–ö–æ–Ω–µ—á–Ω–æ, —Å–µ–π—á–∞—Å —á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `OAuth` –∏ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —É –≤–∞—Å –ø—Ä–æ—Å—Ç–æ –∫ –∫–∞–∂–¥–æ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∞ –±–µ–∫–µ–Ω–¥ –∏–¥—ë—Ç `Bearer` —Ö—ç–¥–µ—Ä —Å —Ç–æ–∫–µ–Ω–æ–º –∏–∑ —Å–µ—Å—Å–∏–∏, —Ç–∞–∫ —á—Ç–æ —ç—Ç–æ –Ω–µ –æ—Å–æ–±–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –≤—Å–µ—Ö.

### –í—Ç–æ—Ä–æ–π —Å–ø–æ—Å–æ–±

–¢–∞–∫ –∫–∞–∫ SSE —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö HTTP –≤ –æ—Ç–ª–∏—á–∏–∏ –æ—Ç WebSockets, –º—ã –º–æ–∂–µ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SSE —Å –ø–æ–º–æ—â—å—é `fetch`. –£—Ç–æ—á–Ω—é, —á—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å `EventSource` –ø–æ–ª–∏—Ñ–∏–ª, –Ω—É–∂–Ω–æ –ª–∏—à—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ–µ–æ–±—Ä–∞–∑–Ω—ã–π [`fetch streaming API`](https://developer.chrome.com/articles/fetch-streaming-requests/).

–ï—Å–ª–∏ –≤—ã –ø–æ–ø—Ä–æ–±—É–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å–∞–º–∏, —Ç–æ –≤—ã –Ω–∞—Ç–∫–Ω—ë—Ç–µ—Å—å –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ–±—Ä—ã–≤–∫–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–∞–º–∏–º –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–∫–ª–µ–∏–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π. –í –∑–∞–º–µ–Ω —Å–≤–æ–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç–æ–∏—Ç –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Å—Ç–æ—Ä–æ–Ω—É —ç—Ç–æ–≥–æ npm –ø–∞–∫–µ—Ç–∞ [@microsoft/fetch-event-source](https://www.npmjs.com/package/@microsoft/fetch-event-source), –Ω—É –∏–ª–∏ –≤–¥–æ—Ö–Ω–æ–≤–∏—Ç—å—Å—è –∏–º.

**üëç –ö–∞–∫–∏–µ –ø–ª—é—Å—ã?**

* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è Page Visibility API;
* –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ, —á—Ç–æ –º–æ–∂–Ω–æ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤ `fetch`.

**üëé –ú–∏–Ω—É—Å—ã:**

* –ü—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ —Ç–∞–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ DevTools (chrome, firefox –∏ –º–æ–∂–µ—Ç –≤ –¥—Ä—É–≥–∏—Ö —Ç–æ–∂–µ), –≤—ã –Ω–µ —É–≤–∏–¥–∏—Ç–µ –∫—Ä–∞—Å–∏–≤—É—é —Ç–∞–±–ª–∏—á–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–∞–∫ –µ—Å–ª–∏ –±—ã —ç—Ç–æ –±—ã–ª –Ω–∞—Ç–∏–≤–Ω—ã–π `EventSource`. –ù–æ —ç—Ç–æ –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –∏–ª–∏ –ª—é–±—ã–º –¥—Ä—É–≥–∏–º —É–≥–æ–¥–Ω—ã–º –≤–∞–º —Å–ø–æ—Å–æ–±–æ–º - [Issue #3](https://github.com/Azure/fetch-event-source/issues/3)
* –ù–µ –Ω–∞—Ç–∏–≤–Ω–æ - –¥–∞, –º–∏—Ä JS –Ω–∞–ø–æ–ª–Ω–µ–Ω —Å–æ—Ç–Ω—è–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ, –≤—Å–µ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ —Ä–∞–∑–Ω–æ–º—É –∏ —Ö–æ—á–µ—Ç—Å—è —Ö–æ—Ä–æ—à–∏—Ö, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –≤ Web —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –Ω–æ, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–∏ Web —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ –∏ –∏–Ω–æ–≥–¥–∞ [–Ω–µ –º–µ–Ω—è—é—Ç—Å—è –≥–æ–¥–∞–º–∏](https://github.com/whatwg/html/issues/2177).

## –ü—Ä–æ–±–ª–µ–º–∞ HTTP –º–µ—Ç–æ–¥–∞

`EventSource` —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTP —Å –º–µ—Ç–æ–¥–æ–º `GET`. –ö–∞–∫ –º—ã –∑–Ω–∞–µ–º, `GET` –≤ –±—Ä–∞—É–∑–µ—Ä–µ - [–Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `body` –∑–∞–ø—Ä–æ—Å–∞](https://xhr.spec.whatwg.org/#the-send()-method). –ò –µ—Å–ª–∏ –≤–∞–º –æ—á–µ–Ω—å –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `EventSource` —Å –º–µ—Ç–æ–¥–æ–º `POST` –∏ –∫–∞–∫–∏–º-—Ç–æ `body` - –≤—ã –º–æ–∂–µ—Ç–µ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [@microsoft/fetch-event-source](https://www.npmjs.com/package/@microsoft/fetch-event-source).

**–ù–æ**, –º–æ—ë *–∏–º—Ö–æ*, —á—Ç–æ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø—Ä–æ—Å—Ç–æ –Ω–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–∞–∂–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏.

–Ø –±—ã –≤–∞–º –ø—Ä–µ–¥–ª–æ–∂–∏–ª –≤—Å—ë —Ç–∞–∫–∏ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º HTTP `POST/PUT/...` –∑–∞–ø—Ä–æ—Å–æ–º –∫–∞–∫–æ–π –ª–∏–±–æ —Ä–µ—Å—É—Ä—Å (–æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–º, –∏ —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏ –±—ç–∫–µ–Ω–¥–∞ –∏–ª–∏ –≤ –∫–∞–∫–æ–º-—Ç–æ redis...), –∞ –∑–∞—Ç–µ–º —É–∂–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —ç—Ç–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `SSE` —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
